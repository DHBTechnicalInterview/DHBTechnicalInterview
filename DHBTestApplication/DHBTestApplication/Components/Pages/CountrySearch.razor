@page "/country-search"
@using DHBTestApplication.Infrastructure
@using DHBTestApplication.Web.Dto
@inherits CountrySearchBase

<div class="container mt-4">
    <h3>Search Country</h3>

    <div class="row mt-3">
        <div class="col-md-6">
            <div class="input-group">
                <RadzenTextBox Placeholder="Enter country name" @bind-Value="SearchTerm" />
                <RadzenButton Click="CountrySearch" Text="Search" ButtonStyle="ButtonStyle.Primary" />
            </div>
        </div>
    </div>

    @if (Countries != null && Countries.Any())
    {
        <RadzenDataGrid Data="@Countries" TItem="CountryDto" AllowPaging="true" PageSize="10" AllowSorting="true" class="mt-4">
            <Columns>
                <RadzenDataGridColumn TItem="CountryDto" Property="name.official" Title="Official Name" />
                <RadzenDataGridColumn TItem="CountryDto" Property="name.common" Title="Common Name" />
                <RadzenDataGridColumn TItem="CountryDto" Property="population" Title="Population">
                    <Template Context="data">
                        @data.population.ToString("N0")
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="CountryDto" Property="area" Title="Area">
                    <Template Context="data">
                        @data.area.ToString("N0")
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="CountryDto" Property="region" Title="Region" />
            </Columns>
        </RadzenDataGrid>
    }

    @if (!string.IsNullOrEmpty(ErrorMessage))
    {
        <RadzenAlert AlertStyle="AlertStyle.Danger" ShowIcon="true" AllowClose="false" class="mt-3">
            @ErrorMessage
        </RadzenAlert>
    }
</div>
