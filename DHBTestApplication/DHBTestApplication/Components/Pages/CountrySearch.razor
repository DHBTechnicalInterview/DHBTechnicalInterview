@page "/country-search"
@using DHBTestApplication.Infrastructure
@using DHBTestApplication.Web.Payload
@inherits CountrySearchBase

<div class="container mt-4">
    <h3>Search Country</h3>
    <div class="row mt-3">
        <div class="col-md-6">
            <div class="input-group">
                <input
                    type="text"
                    class="form-control"
                    placeholder="Enter country name"
                    @bind="SearchTerm"
                    @oninput="OnSearchInput"
                    />
            </div>
        </div>
    </div>

    @if (Countries != null && Countries.Any())
    {
        <RadzenDataGrid Data="@Countries"
                        TItem="CountryPayload"
                        AllowPaging="true"
                        PageSize="10"
                        AllowSorting="true"
                        class="mt-4">
            <Columns>
                <RadzenDataGridColumn TItem="CountryPayload" Property="name.official" Title="Official Name" />
                <RadzenDataGridColumn TItem="CountryPayload" Property="name.common" Title="Common Name" />
                <RadzenDataGridColumn TItem="CountryPayload" Property="population" Title="Population">
                    <Template Context="data">
                        @data.population.ToString("N0")
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="CountryPayload" Property="area" Title="Area (kmÂ²)">
                    <Template Context="data">
                        @data.area.ToString("N0")
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="CountryPayload" Property="region" Title="Region" />
                <RadzenDataGridColumn TItem="CountryPayload" Property="capital" Title="Capital">
                    <Template Context="data">
                        @(data.capital?.FirstOrDefault() ?? "N/A")
                    </Template>
                </RadzenDataGridColumn>
            </Columns>
        </RadzenDataGrid>
    }

    @if (!string.IsNullOrEmpty(ErrorMessage))
    {
        <RadzenAlert AlertStyle="AlertStyle.Danger" ShowIcon="true" AllowClose="false" class="mt-3">
            @ErrorMessage
        </RadzenAlert>
    }
    @if (!string.IsNullOrEmpty(WarningMessage))
    {
        <RadzenAlert AlertStyle="AlertStyle.Warning" ShowIcon="true" AllowClose="false" class="mt-3">
            @WarningMessage
        </RadzenAlert>
    }

</div>

